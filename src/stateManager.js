// Добавьте этот файл в ваш проект как stateManager.ts
export class StateManager {
    constructor() {
        this.state = {
            currentPhase: "next goal choosing",
            currentGoal: "Identify if there are any urgent tasks",
            userActivity: "talking with AI",
            hasUrgentTasks: "unknown",
            urgentTasksList: [],
            currentUrgentTask: null,
            planExists: "unknown",
            lastUpdateTime: new Date()
        };
    }
    // Singleton паттерн для доступа к состоянию
    static getInstance() {
        if (!StateManager.instance) {
            StateManager.instance = new StateManager();
        }
        return StateManager.instance;
    }
    // Получить текущее состояние
    getState() {
        // Обновляем время перед возвратом
        this.state.lastUpdateTime = new Date();
        return Object.assign({}, this.state);
    }
    // Обновить состояние
    updateState(newState) {
        this.state = Object.assign(Object.assign(Object.assign({}, this.state), newState), { lastUpdateTime: new Date() });
    }
    // Добавление задачи в список срочных задач
    addUrgentTask(task) {
        if (!this.state.urgentTasksList.includes(task)) {
            this.state.urgentTasksList.push(task);
            // Если нет текущей задачи, устанавливаем первую из списка
            if (!this.state.currentUrgentTask && this.state.urgentTasksList.length > 0) {
                this.state.currentUrgentTask = this.state.urgentTasksList[0];
            }
            this.state.hasUrgentTasks = true;
        }
    }
    // Удаление задачи из списка и обновление текущей задачи
    completeUrgentTask(task) {
        const index = this.state.urgentTasksList.indexOf(task);
        if (index !== -1) {
            this.state.urgentTasksList.splice(index, 1);
            // Если список не пуст, обновляем текущую задачу
            if (this.state.urgentTasksList.length > 0) {
                this.state.currentUrgentTask = this.state.urgentTasksList[0];
            }
            else {
                this.state.currentUrgentTask = null;
                this.state.hasUrgentTasks = false;
            }
        }
    }
    // Получить состояние в формате для вставки в сообщение
    getStateFormatted() {
        const currentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        return `- **[day phase]** ${this.state.currentPhase}
  - **[next goal]** ${this.state.currentGoal}
  - **[user activity]** ${this.state.userActivity}
  - **[AI time]** ${currentTime}`;
    }
    // Анализ сообщения пользователя для обновления состояния
    processUserMessage(message) {
    }
    // Сохранение состояния в локальное хранилище
    saveStateToStorage() {
        localStorage.setItem('assistantState', JSON.stringify(this.state));
    }
    // Загрузка состояния из локального хранилища
    loadStateFromStorage() {
        const savedState = localStorage.getItem('assistantState');
        if (savedState) {
            try {
                const parsedState = JSON.parse(savedState);
                // Восстанавливаем дату
                parsedState.lastUpdateTime = new Date(parsedState.lastUpdateTime);
                this.state = parsedState;
                return true;
            }
            catch (e) {
                console.error('Error parsing saved state:', e);
            }
        }
        return false;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGVNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3RhdGVNYW5hZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHNEQUFzRDtBQWF0RCxNQUFNLE9BQU8sWUFBWTtJQUlyQjtRQUNJLElBQUksQ0FBQyxLQUFLLEdBQUc7WUFDVCxZQUFZLEVBQUUsb0JBQW9CO1lBQ2xDLFdBQVcsRUFBRSx3Q0FBd0M7WUFDckQsWUFBWSxFQUFFLGlCQUFpQjtZQUMvQixjQUFjLEVBQUUsU0FBUztZQUN6QixlQUFlLEVBQUUsRUFBRTtZQUNuQixpQkFBaUIsRUFBRSxJQUFJO1lBQ3ZCLFVBQVUsRUFBRSxTQUFTO1lBQ3JCLGNBQWMsRUFBRSxJQUFJLElBQUksRUFBRTtTQUM3QixDQUFDO0lBQ04sQ0FBQztJQUVELDRDQUE0QztJQUNyQyxNQUFNLENBQUMsV0FBVztRQUNyQixJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ3pCLFlBQVksQ0FBQyxRQUFRLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUMvQyxDQUFDO1FBQ0QsT0FBTyxZQUFZLENBQUMsUUFBUSxDQUFDO0lBQ2pDLENBQUM7SUFFRCw2QkFBNkI7SUFDdEIsUUFBUTtRQUNYLGtDQUFrQztRQUNsQyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3ZDLHlCQUFZLElBQUksQ0FBQyxLQUFLLEVBQUc7SUFDN0IsQ0FBQztJQUVELHFCQUFxQjtJQUNkLFdBQVcsQ0FBQyxRQUFpQztRQUNoRCxJQUFJLENBQUMsS0FBSyxpREFDSCxJQUFJLENBQUMsS0FBSyxHQUNWLFFBQVEsS0FDWCxjQUFjLEVBQUUsSUFBSSxJQUFJLEVBQUUsR0FDN0IsQ0FBQztJQUNOLENBQUM7SUFFRCwyQ0FBMkM7SUFDcEMsYUFBYSxDQUFDLElBQVk7UUFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLFFB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QztJQUNqQixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIvLyDQlNC+0LHQsNCy0YzRgtC1INGN0YLQvtGCINGE0LDQudC7INCyINCy0LDRiCDQv9GA0L7QtdC60YIg0LrQsNC6IHN0YXRlTWFuYWdlci50c1xuXG5leHBvcnQgaW50ZXJmYWNlIEFzc2lzdGFudFN0YXRlIHtcbiAgICBjdXJyZW50UGhhc2U6IFwibmV4dCBnb2FsIGNob29zaW5nXCIgfCBcInNwZWNpZmljIGdvYWwgcmVhbGl6YXRpb25cIiB8IFwiZGF5IG1hbmFnZW1lbnRcIjtcbiAgICBjdXJyZW50R29hbDogc3RyaW5nO1xuICAgIHVzZXJBY3Rpdml0eTogc3RyaW5nO1xuICAgIGhhc1VyZ2VudFRhc2tzOiBib29sZWFuIHwgXCJ1bmtub3duXCI7XG4gICAgdXJnZW50VGFza3NMaXN0OiBzdHJpbmdbXTtcbiAgICBjdXJyZW50VXJnZW50VGFzazogc3RyaW5nIHwgbnVsbDtcbiAgICBwbGFuRXhpc3RzOiBib29sZWFuIHwgXCJ1bmtub3duXCI7XG4gICAgbGFzdFVwZGF0ZVRpbWU6IERhdGU7XG59XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZU1hbmFnZXIge1xuICAgIHByaXZhdGUgc3RhdGU6IEFzc2lzdGFudFN0YXRlO1xuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBTdGF0ZU1hbmFnZXI7XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgY3VycmVudFBoYXNlOiBcIm5leHQgZ29hbCBjaG9vc2luZ1wiLFxuICAgICAgICAgICAgY3VycmVudEdvYWw6IFwiSWRlbnRpZnkgaWYgdGhlcmUgYXJlIGFueSB1cmdlbnQgdGFza3NcIixcbiAgICAgICAgICAgIHVzZXJBY3Rpdml0eTogXCJ0YWxraW5nIHdpdGggQUlcIixcbiAgICAgICAgICAgIGhhc1VyZ2VudFRhc2tzOiBcInVua25vd25cIixcbiAgICAgICAgICAgIHVyZ2VudFRhc2tzTGlzdDogW10sXG4gICAgICAgICAgICBjdXJyZW50VXJnZW50VGFzazogbnVsbCxcbiAgICAgICAgICAgIHBsYW5FeGlzdHM6IFwidW5rbm93blwiLFxuICAgICAgICAgICAgbGFzdFVwZGF0ZVRpbWU6IG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBTaW5nbGV0b24g0L/QsNGC0YLQtdGA0L0g0LTQu9GPINC00L7RgdGC0YPQv9CwINC6INGB0L7RgdGC0L7Rj9C90LjRjlxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogU3RhdGVNYW5hZ2VyIHtcbiAgICAgICAgaWYgKCFTdGF0ZU1hbmFnZXIuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIFN0YXRlTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBTdGF0ZU1hbmFnZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gU3RhdGVNYW5hZ2VyLmluc3RhbmNlO1xuICAgIH1cblxuICAgIC8vINCf0L7Qu9GD0YfQuNGC0Ywg0YLQtdC60YPRidC10LUg0YHQvtGB0YLQvtGP0L3QuNC1XG4gICAgcHVibGljIGdldFN0YXRlKCk6IEFzc2lzdGFudFN0YXRlIHtcbiAgICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INCy0YDQtdC80Y8g0L/QtdGA0LXQtCDQstC+0LfQstGA0LDRgtC+0LxcbiAgICAgICAgdGhpcy5zdGF0ZS5sYXN0VXBkYXRlVGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMuc3RhdGUgfTtcbiAgICB9XG5cbiAgICAvLyDQntCx0L3QvtCy0LjRgtGMINGB0L7RgdGC0L7Rj9C90LjQtVxuICAgIHB1YmxpYyB1cGRhdGVTdGF0ZShuZXdTdGF0ZTogUGFydGlhbDxBc3Npc3RhbnRTdGF0ZT4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuc3RhdGUsXG4gICAgICAgICAgICAuLi5uZXdTdGF0ZSxcbiAgICAgICAgICAgIGxhc3RVcGRhdGVUaW1lOiBuZXcgRGF0ZSgpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0LfQsNC00LDRh9C4INCyINGB0L/QuNGB0L7QuiDRgdGA0L7Rh9C90YvRhSDQt9Cw0LTQsNGHXG4gICAgcHVibGljIGFkZFVyZ2VudFRhc2sodGFzazogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS51cmdlbnRUYXNrc0xpc3QuaW5jbHVkZXModGFzaykpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudXJnZW50VGFza3NMaXN0LnB1c2godGFzayk7XG5cbiAgICAgICAgICAgIC8vINCV0YHQu9C4INC90LXRgiDRgtC10LrRg9GJ0LXQuSDQt9Cw0LTQsNGH0LgsINGD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC/0LXRgNCy0YPRjiDQuNC3INGB0L/QuNGB0LrQsFxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmN1cnJlbnRVcmdlbnRUYXNrICYmIHRoaXMuc3RhdGUudXJnZW50VGFza3NMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRVcmdlbnRUYXNrID0gdGhpcy5zdGF0ZS51cmdlbnRUYXNrc0xpc3RbMF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaGFzVXJnZW50VGFza3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g0KPQtNCw0LvQtdC90LjQtSDQt9Cw0LTQsNGH0Lgg0LjQtyDRgdC/0LjRgdC60LAg0Lgg0L7QsdC90L7QstC70LXQvdC40LUg0YLQtdC60YPRidC10Lkg0LfQsNC00LDRh9C4XG4gICAgcHVibGljIGNvbXBsZXRlVXJnZW50VGFzayh0YXNrOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnN0YXRlLnVyZ2VudFRhc2tzTGlzdC5pbmRleE9mKHRhc2spO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnVyZ2VudFRhc2tzTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICAgICAgICAvLyDQldGB0LvQuCDRgdC/0LjRgdC+0Log0L3QtSDQv9GD0YHRgiwg0L7QsdC90L7QstC70Y/QtdC8INGC0LXQutGD0YnRg9GOINC30LDQtNCw0YfRg1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUudXJnZW50VGFza3NMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRVcmdlbnRUYXNrID0gdGhpcy5zdGF0ZS51cmdlbnRUYXNrc0xpc3RbMF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFVyZ2VudFRhc2sgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaGFzVXJnZW50VGFza3MgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vINCf0L7Qu9GD0YfQuNGC0Ywg0YHQvtGB0YLQvtGP0L3QuNC1INCyINGE0L7RgNC80LDRgtC1INC00LvRjyDQstGB0YLQsNCy0LrQuCDQsiDRgdC+0L7QsdGJ0LXQvdC40LVcbiAgICBwdWJsaWMgZ2V0U3RhdGVGb3JtYXR0ZWQoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pO1xuXG4gICAgICAgIHJldHVybiBgLSAqKltkYXkgcGhhc2VdKiogJHt0aGlzLnN0YXRlLmN1cnJlbnRQaGFzZX1cbiAgLSAqKltuZXh0IGdvYWxdKiogJHt0aGlzLnN0YXRlLmN1cnJlbnRHb2FsfVxuICAtICoqW3VzZXIgYWN0aXZpdHldKiogJHt0aGlzLnN0YXRlLnVzZXJBY3Rpdml0eX1cbiAgLSAqKltBSSB0aW1lXSoqICR7Y3VycmVudFRpbWV9YDtcbiAgICB9XG5cbiAgICAvLyDQkNC90LDQu9C40Lcg0YHQvtC+0LHRidC10L3QuNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQtNC70Y8g0L7QsdC90L7QstC70LXQvdC40Y8g0YHQvtGB0YLQvtGP0L3QuNGPXG4gICAgcHVibGljIHByb2Nlc3NVc2VyTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcblxuICAgIH1cblxuXG4gICAgLy8g0KHQvtGF0YDQsNC90LXQvdC40LUg0YHQvtGB0YLQvtGP0L3QuNGPINCyINC70L7QutCw0LvRjNC90L7QtSDRhdGA0LDQvdC40LvQuNGJ0LVcbiAgICBwdWJsaWMgc2F2ZVN0YXRlVG9TdG9yYWdlKCk6IHZvaWQge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXNzaXN0YW50U3RhdGUnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlKSk7XG4gICAgfVxuXG4gICAgLy8g0JfQsNCz0YDRg9C30LrQsCDRgdC+0YHRgtC+0Y/QvdC40Y8g0LjQtyDQu9C+0LrQsNC70YzQvdC+0LPQviDRhdGA0LDQvdC40LvQuNGJ0LBcbiAgICBwdWJsaWMgbG9hZFN0YXRlRnJvbVN0b3JhZ2UoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXNzaXN0YW50U3RhdGUnKTtcbiAgICAgICAgaWYgKHNhdmVkU3RhdGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkU3RhdGUgPSBKU09OLnBhcnNlKHNhdmVkU3RhdGUpO1xuICAgICAgICAgICAgICAgIC8vINCS0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQtNCw0YLRg1xuICAgICAgICAgICAgICAgIHBhcnNlZFN0YXRlLmxhc3RVcGRhdGVUaW1lID0gbmV3IERhdGUocGFyc2VkU3RhdGUubGFzdFVwZGF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBwYXJzZWRTdGF0ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIHNhdmVkIHN0YXRlOicsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59Il19