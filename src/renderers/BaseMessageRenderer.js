// src/renderers/BaseMessageRenderer.ts
import { setIcon } from "obsidian";
import { CSS_CLASSES } from "../constants";
import * as RendererUtils from "../MessageRendererUtils";
export class BaseMessageRenderer {
    constructor(app, plugin, message, view) {
        this.app = app;
        this.plugin = plugin;
        this.message = message;
        this.view = view;
    }
    createMessageGroupWrapper(groupClasses = []) {
        const messageGroup = document.createElement("div");
        messageGroup.classList.add(CSS_CLASSES.MESSAGE_GROUP, ...groupClasses);
        // Встановлюємо timestamp тут, бо він відомий при створенні
        messageGroup.setAttribute("data-timestamp", this.message.timestamp.getTime().toString());
        return messageGroup;
    }
    // --- ЗРОБЛЕНО СТАТИЧНИМ ---
    /**
     * Створює та додає елемент мітки часу до вказаного батьківського елемента.
     * @param parentElement - Елемент, куди додати мітку часу.
     * @param timestamp - Об'єкт Date для форматування.
     * @param view - Екземпляр OllamaView для доступу до форматера.
     */
    static addTimestamp(parentElement, timestamp, view) {
        // Перевіряємо, чи мітка часу вже існує (на випадок повторного виклику)
        if (parentElement.querySelector(`.${CSS_CLASSES.TIMESTAMP}`)) {
            return;
        }
        parentElement.createDiv({
            cls: CSS_CLASSES.TIMESTAMP,
            text: view.formatTime(timestamp), // Використовуємо view для форматування
        });
    }
    // --- КІНЕЦЬ ЗМІНИ ---
    addAvatar(messageGroup, isUser) {
        RendererUtils.renderAvatar(this.app, this.plugin, messageGroup, isUser, this.message.role);
    }
    // addBaseActionButtons залишається методом екземпляра, бо залежить від this.message та this.view
    addBaseActionButtons(messageWrapper, contentToCopy) {
        // ... (реалізація як раніше) ...
        const buttonsWrapper = messageWrapper.createDiv({ cls: "message-actions-wrapper" });
        // Copy Button
        const copyBtn = buttonsWrapper.createEl("button", { cls: CSS_CLASSES.COPY_BUTTON, attr: { "aria-label": "Copy", title: "Copy" } });
        setIcon(copyBtn, "copy");
        this.view.registerDomEvent(copyBtn, "click", e => { e.stopPropagation(); this.view.handleCopyClick(contentToCopy, copyBtn); });
        // Delete Button
        const deleteBtn = buttonsWrapper.createEl("button", { cls: [CSS_CLASSES.DELETE_MESSAGE_BUTTON, CSS_CLASSES.DANGER_OPTION], attr: { "aria-label": "Delete message", title: "Delete Message" } });
        setIcon(deleteBtn, "trash");
        this.view.registerDomEvent(deleteBtn, "click", e => { e.stopPropagation(); this.view.handleDeleteMessageClick(this.message); });
    }
    createMessageBubble(messageWrapper, messageClasses = []) {
        // ... (реалізація як раніше) ...
        const messageEl = messageWrapper.createDiv({ cls: [CSS_CLASSES.MESSAGE, ...messageClasses] });
        const contentContainer = messageEl.createDiv({ cls: CSS_CLASSES.CONTENT_CONTAINER });
        const contentEl = contentContainer.createDiv({ cls: CSS_CLASSES.CONTENT });
        return { messageEl, contentContainer, contentEl };
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFzZU1lc3NhZ2VSZW5kZXJlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkJhc2VNZXNzYWdlUmVuZGVyZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsdUNBQXVDO0FBQ3ZDLE9BQU8sRUFBTyxPQUFPLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFJeEMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUMzQyxPQUFPLEtBQUssYUFBYSxNQUFNLHlCQUF5QixDQUFDO0FBR3pELE1BQU0sT0FBZ0IsbUJBQW1CO0lBTXhDLFlBQVksR0FBUSxFQUFFLE1BQW9CLEVBQUUsT0FBZ0IsRUFBRSxJQUFnQjtRQUM3RSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNmLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ2xCLENBQUM7SUFJUyx5QkFBeUIsQ0FBQyxlQUF5QixFQUFFO1FBQzlELE1BQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkQsWUFBWSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLGFBQWEsRUFBRSxHQUFHLFlBQVksQ0FBQyxDQUFDO1FBQ3ZFLDJEQUEyRDtRQUMzRCxZQUFZLENBQUMsWUFBWSxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFDekYsT0FBTyxZQUFZLENBQUM7SUFDckIsQ0FBQztJQUVELDZCQUE2QjtJQUM3Qjs7Ozs7T0FLRztJQUNJLE1BQU0sQ0FBQyxZQUFZLENBQUMsYUFBMEIsRUFBRSxTQUFlLEVBQUUsSUFBZ0I7UUFDdkYsdUVBQXVFO1FBQ2pFLElBQUksYUFBYSxDQUFD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cmVycy9CYXNlTWVzc2FnZVJlbmRlcmVyLnRzXG5pbXBvcnQgeyBBcHAsIHNldEljb24gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCBPbGxhbWFQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IE9sbGFtYVZpZXcgfSBmcm9tIFwiLi4vT2xsYW1hVmlld1wiO1xuaW1wb3J0IHsgQ1NTX0NMQVNTRVMgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgKiBhcyBSZW5kZXJlclV0aWxzIGZyb20gXCIuLi9NZXNzYWdlUmVuZGVyZXJVdGlsc1wiO1xuaW1wb3J0IHsgSU1lc3NhZ2VSZW5kZXJlciB9IGZyb20gXCIuL0lNZXNzYWdlUmVuZGVyZXJcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VNZXNzYWdlUmVuZGVyZXIgaW1wbGVtZW50cyBJTWVzc2FnZVJlbmRlcmVyIHtcblx0cHJvdGVjdGVkIHJlYWRvbmx5IGFwcDogQXBwO1xuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgcGx1Z2luOiBPbGxhbWFQbHVnaW47XG5cdHByb3RlY3RlZCByZWFkb25seSBtZXNzYWdlOiBNZXNzYWdlO1xuXHRwcm90ZWN0ZWQgcmVhZG9ubHkgdmlldzogT2xsYW1hVmlldztcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBPbGxhbWFQbHVnaW4sIG1lc3NhZ2U6IE1lc3NhZ2UsIHZpZXc6IE9sbGFtYVZpZXcpIHtcblx0XHR0aGlzLmFwcCA9IGFwcDtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdHRoaXMudmlldyA9IHZpZXc7XG5cdH1cblxuXHRhYnN0cmFjdCByZW5kZXIoKTogUHJvbWlzZTxIVE1MRWxlbWVudD4gfCBIVE1MRWxlbWVudDtcblxuXHRwcm90ZWN0ZWQgY3JlYXRlTWVzc2FnZUdyb3VwV3JhcHBlcihncm91cENsYXNzZXM6IHN0cmluZ1tdID0gW10pOiBIVE1MRWxlbWVudCB7XG5cdFx0Y29uc3QgbWVzc2FnZUdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRtZXNzYWdlR3JvdXAuY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5NRVNTQUdFX0dST1VQLCAuLi5ncm91cENsYXNzZXMpO1xuXHRcdC8vINCS0YHRgtCw0L3QvtCy0LvRjtGU0LzQviB0aW1lc3RhbXAg0YLRg9GCLCDQsdC+INCy0ZbQvSDQstGW0LTQvtC80LjQuSDQv9GA0Lgg0YHRgtCy0L7RgNC10L3QvdGWXG5cdFx0bWVzc2FnZUdyb3VwLnNldEF0dHJpYnV0ZShcImRhdGEtdGltZXN0YW1wXCIsIHRoaXMubWVzc2FnZS50aW1lc3RhbXAuZ2V0VGltZSgpLnRvU3RyaW5nKCkpO1xuXHRcdHJldHVybiBtZXNzYWdlR3JvdXA7XG5cdH1cblxuXHQvLyAtLS0g0JfQoNCe0JHQm9CV0J3QniDQodCi0JDQotCY0KfQndCY0JwgLS0tXG5cdC8qKlxuXHQgKiDQodGC0LLQvtGA0Y7RlCDRgtCwINC00L7QtNCw0ZQg0LXQu9C10LzQtdC90YIg0LzRltGC0LrQuCDRh9Cw0YHRgyDQtNC+INCy0LrQsNC30LDQvdC+0LPQviDQsdCw0YLRjNC60ZbQstGB0YzQutC+0LPQviDQtdC70LXQvNC10L3RgtCwLlxuXHQgKiBAcGFyYW0gcGFyZW50RWxlbWVudCAtINCV0LvQtdC80LXQvdGCLCDQutGD0LTQuCDQtNC+0LTQsNGC0Lgg0LzRltGC0LrRgyDRh9Cw0YHRgy5cblx0ICogQHBhcmFtIHRpbWVzdGFtcCAtINCe0LEn0ZTQutGCIERhdGUg0LTQu9GPINGE0L7RgNC80LDRgtGD0LLQsNC90L3Rjy5cblx0ICogQHBhcmFtIHZpZXcgLSDQldC60LfQtdC80L/Qu9GP0YAgT2xsYW1hVmlldyDQtNC70Y8g0LTQvtGB0YLRg9C/0YMg0LTQviDRhNC+0YDQvNCw0YLQtdGA0LAuXG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIGFkZFRpbWVzdGFtcChwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCwgdGltZXN0YW1wOiBEYXRlLCB2aWV3OiBPbGxhbWFWaWV3KTogdm9pZCB7XG5cdFx0Ly8g0J/QtdGA0LXQstGW0YDRj9GU0LzQviwg0YfQuCDQvNGW0YLQutCwINGH0LDRgdGDINCy0LbQtSDRltGB0L3Rg9GUICjQvdCwINCy0LjQv9Cw0LTQvtC6INC/0L7QstGC0L7RgNC90L7Qs9C+INCy0LjQutC70LjQutGDKVxuICAgICAgICBpZiAocGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtDU1NfQ0xBU1NFUy5USU1FU1RBTVB9YCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXHRcdHBhcmVudEVsZW1lbnQuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogQ1NTX0NMQVNTRVMuVElNRVNUQU1QLFxuXHRcdFx0dGV4dDogdmlldy5mb3JtYXRUaW1lKHRpbWVzdGFtcCksIC8vINCS0LjQutC+0YDQuNGB0YLQvtCy0YPRlNC80L4gdmlldyDQtNC70Y8g0YTQvtGA0LzQsNGC0YPQstCw0L3QvdGPXG5cdFx0fSk7XG5cdH1cblx0Ly8gLS0tINCa0IbQndCV0KbQrCDQl9Cc0IbQndCYIC0tLVxuXG5wcm90ZWN0ZWQgYWRkQXZhdGFyKG1lc3NhZ2VHcm91cDogSFRNTEVsZW1lbnQsIGlzVXNlcjogYm9vbGVhbik6IHZvaWQge1xuICAgIFJlbmRlcmVyVXRpbHMucmVuZGVyQXZhdGFyKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgbWVzc2FnZUdyb3VwLCBpc1VzZXIsIHRoaXMubWVzc2FnZS5yb2xlKTtcbn1cblxuXG5cblx0Ly8gYWRkQmFzZUFjdGlvbkJ1dHRvbnMg0LfQsNC70LjRiNCw0ZTRgtGM0YHRjyDQvNC10YLQvtC00L7QvCDQtdC60LfQtdC80L/Qu9GP0YDQsCwg0LHQviDQt9Cw0LvQtdC20LjRgtGMINCy0ZbQtCB0aGlzLm1lc3NhZ2Ug0YLQsCB0aGlzLnZpZXdcbiAgICBwcm90ZWN0ZWQgYWRkQmFzZUFjdGlvbkJ1dHRvbnMobWVzc2FnZVdyYXBwZXI6IEhUTUxFbGVtZW50LCBjb250ZW50VG9Db3B5OiBzdHJpbmcpOiB2b2lkIHtcblx0XHQvLyAuLi4gKNGA0LXQsNC70ZbQt9Cw0YbRltGPINGP0Log0YDQsNC90ZbRiNC1KSAuLi5cbiAgICAgICAgIGNvbnN0IGJ1dHRvbnNXcmFwcGVyID0gbWVzc2FnZVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm1lc3NhZ2UtYWN0aW9ucy13cmFwcGVyXCIgfSk7XG4gICAgICAgICAvLyBDb3B5IEJ1dHRvblxuICAgICAgICAgY29uc3QgY29weUJ0biA9IGJ1dHRvbnNXcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgY2xzOiBDU1NfQ0xBU1NFUy5DT1BZX0JVVFRPTiwgYXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJDb3B5XCIsIHRpdGxlOiBcIkNvcHlcIiB9IH0pO1xuICAgICAgICAgc2V0SWNvbihjb3B5QnRuLCBcImNvcHlcIik7XG4gICAgICAgICB0aGlzLnZpZXcucmVnaXN0ZXJEb21FdmVudChjb3B5QnRuLCBcImNsaWNrXCIsIGUgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyB0aGlzLnZpZXcuaGFuZGxlQ29weUNsaWNrKGNvbnRlbnRUb0NvcHksIGNvcHlCdG4pOyB9KTtcbiAgICAgICAgIC8vIERlbGV0ZSBCdXR0b25cbiAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbnNXcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgY2xzOiBbQ1NTX0NMQVNTRVMuREVMRVRFX01FU1NBR0VfQlVUVE9OLCBDU1NfQ0xBU1NFUy5EQU5HRVJfT1BUSU9OXSwgYXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGUgbWVzc2FnZVwiLCB0aXRsZTogXCJEZWxldGUgTWVzc2FnZVwiIH0gfSk7XG4gICAgICAgICBzZXRJY29uKGRlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcbiAgICAgICAgIHRoaXMudmlldy5yZWdpc3RlckRvbUV2ZW50KGRlbGV0ZUJ0biwgXCJjbGlja1wiLCBlID0+IHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgdGhpcy52aWV3LmhhbmRsZURlbGV0ZU1lc3NhZ2VDbGljayh0aGlzLm1lc3NhZ2UpOyB9KTtcblx0fVxuXG4gICAgcHJvdGVjdGVkIGNyZWF0ZU1lc3NhZ2VCdWJibGUobWVzc2FnZVdyYXBwZXI6IEhUTUxFbGVtZW50LCBtZXNzYWdlQ2xhc3Nlczogc3RyaW5nW10gPSBbXSk6IHsgbWVzc2FnZUVsOiBIVE1MRWxlbWVudDsgY29udGVudENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7IGNvbnRlbnRFbDogSFRNTEVsZW1lbnQ7IH0ge1xuICAgICAgICAvLyAuLi4gKNGA0LXQsNC70ZbQt9Cw0YbRltGPINGP0Log0YDQsNC90ZbRiNC1KSAuLi5cbiAgICAgICAgY29uc3QgbWVzc2FnZUVsID0gbWVzc2FnZVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiBbQ1NTX0NMQVNTRVMuTUVTU0FHRSwgLi4ubWVzc2FnZUNsYXNzZXNdIH0pO1xuICAgICAgICBjb25zdCBjb250ZW50Q29udGFpbmVyID0gbWVzc2FnZUVsLmNyZWF0ZURpdih7IGNsczogQ1NTX0NMQVNTRVMuQ09OVEVOVF9DT05UQUlORVIgfSk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBDU1NfQ0xBU1NFUy5DT05URU5UIH0pO1xuICAgICAgICByZXR1cm4geyBtZXNzYWdlRWwsIGNvbnRlbnRDb250YWluZXIsIGNvbnRlbnRFbCB9O1xuICAgIH1cbn0iXX0=