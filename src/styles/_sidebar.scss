// src/styles/_sidebar.scss
// Styles for the Ollama sidebar panel and its accordion sections

// --- Sidebar Panel (Hosts Accordion) ---
.ollama-sidebar-container {
    display: flex;
    flex-direction: column;
    width: var(--ai-forge-sidebar-width, 250px);
    min-width: var(--ai-forge-sidebar-width, 250px);
    flex-shrink: 0;
    background-color: var(--background-secondary);
    border-right: 1px solid var(--divider-color);
    height: 100%;
    overflow: hidden;
    box-sizing: border-box;
    padding: var(--size-4-2);
    margin-right: var(--size-4-2);
    transition: width 0.25s ease-out, min-width 0.25s ease-out, opacity 0.25s ease-out, padding 0.25s ease-out, margin 0.25s ease-out, border 0.25s ease-out;

    &.internal-sidebar-hidden {
        width: 0 !important;
        min-width: 0 !important;
        opacity: 0 !important;
        padding: 0 !important;
        margin: 0 !important;
        border: none !important;
        overflow: hidden !important;
        pointer-events: none !important;
    }
}
// --- End Sidebar Panel ---


// --- Sidebar Accordion Sections ---
.ollama-chat-panel,
.ollama-role-panel {
    display: flex;
    flex-direction: column;
    &.ollama-role-panel {
      flex-shrink: 0;
    }
}

.ollama-sidebar-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--size-4-2) var(--size-4-2) var(--size-4-2) var(--size-4-3);
    user-select: none;
    cursor: pointer;
    flex-shrink: 0;
    position: relative;
    border-radius: var(--radius-s);
    margin: 1px 0;
    min-height: var(--nav-item-size);

    &:hover {
      background-color: var(--background-modifier-hover);
    }

    .ollama-sidebar-header-left {
        display: flex;
        align-items: center;
        overflow: hidden;
        margin-right: var(--size-4-2);
        gap: var(--size-4-3); // Проміжок між іконкою заголовка і текстом "Chats"
    }

    .ollama-sidebar-section-icon {
        min-width: 18px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        .svg-icon {
            width: 18px; height: 18px; color: var(--text-faint);
        }
    }
    &:hover .ollama-sidebar-section-icon .svg-icon { color: var(--text-muted); }

    .menu-option-text {
        font-weight: var(--nav-item-font-weight);
        font-size: var(--nav-item-size);
        color: var(--text-normal);
        line-height: 1.2;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .ollama-sidebar-header-actions {
        display: flex;
        align-items: center;
        gap: var(--size-4-1);
        margin-left: auto;
        flex-shrink: 0;
    }

    .ollama-sidebar-header-button {
        padding: var(--size-4-1);
        color: var(--text-muted);
        border-radius: var(--radius-s);
        display: flex; align-items: center; justify-content: center;
        &:hover { color: var(--text-normal); background-color: var(--background-modifier-hover); }
        .svg-icon { width: 18px; height: 18px; }
    }
}

.ollama-sidebar-section-content {
    overflow: hidden; // ВАЖЛИВО: Дозволяє приховувати контент для згорнутих секцій
    max-height: 0;
    transition: max-height 0.3s ease-out, padding 0.3s ease-out, opacity 0.3s ease-out;
    box-sizing: border-box;
    padding: 0 var(--size-4-2); // Горизонтальний відступ
    min-height: 0;
    opacity: 0;

    // Розгорнутий стан секції (Chats або Roles)
    &.is-expanded {
        max-height: 75vh; // Обмеження висоти
        overflow-y: auto; // Скрол, якщо потрібно
        padding-top: var(--size-4-1);
        padding-bottom: var(--size-4-1);
        opacity: 1;
    }

    // Скролбар
    &::-webkit-scrollbar { width: 6px; }
    &::-webkit-scrollbar-track { background: transparent; margin: 2px 0; }
    &::-webkit-scrollbar-thumb { background-color: var(--background-modifier-border); border-radius: 3px; }
    &::-webkit-scrollbar-thumb:hover { background-color: var(--interactive-accent); }

    // --- Стилі для ієрархії ---
}
// --- End Sidebar Accordion Sections Content ---

.ollama-sidebar-section-content-hidden {
    max-height: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    opacity: 0 !important;
    overflow: hidden !important;
    visibility: hidden;
}

// --- Стилізація контекстного меню ---
.menu {
     .menu-item {
         &[aria-label*="Delete Folder" i],
         &[aria-label*="Delete Chat" i],
         &:has(> .menu-item-icon > .svg-icon[icon-name="lucide-trash-2"]) {
             .menu-item-title { color: var(--text-error) !important; }
             .menu-item-icon { color: var(--text-error) !important; }
              &:hover { background-color: var(--background-modifier-error-hover) !important; .menu-item-title, .menu-item-icon { color: var(--text-on-error) !important; } }
         }
          &:has(> .menu-item-icon > .svg-icon[icon-name="lucide-trash"]),
          &:has(> .menu-item-title:contains("Clear Messages")) {
              .menu-item-title { color: var(--text-warning) !important; }
              .menu-item-icon { color: var(--text-warning) !important; }
               &:hover { background-color: var(--background-modifier-warning-hover) !important; .menu-item-title, .menu-item-icon { color: var(--text-on-warning) !important; } }
          }
     }
}