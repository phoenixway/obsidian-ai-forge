// src/styles/_actions.scss

// --- Define Sass Variable ---
$translation-base-line-height: 1.5;
$translation-list-container-line-height: 0.3;
$translation-text-line-height: 1.5;


.message-actions-wrapper {
  // position: absolute; // ВИДАЛЕНО
  // bottom: 4px;      // ВИДАЛЕНО
  display: flex; // ЗАЛИШЕНО - для внутрішнього розташування кнопок
  align-items: center; // ЗАЛИШЕНО - для вертикального вирівнювання кнопок
  gap: calc(var(--chat-spacing-unit) * 1); // Змінено на 1 (було 1.5) для узгодження з _messages.scss
                                            // або можна залишити 1.5, якщо так краще виглядає
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease-in-out, visibility 0s linear 0.2s; // Залишаємо, керується :hover в _messages.scss
  // z-index: 6; // ВИДАЛЕНО - не потрібен для елемента в потоці

  // Показуємо кнопки при наведенні на .message-wrapper (це правило буде в _messages.scss)
  // .message-wrapper:hover & { ... } // Це правило переїде в _messages.scss або вже там є

  // Загальні стилі для кнопок всередині .message-actions-wrapper
  button {
    background: rgba(var(--background-secondary-rgb), 0.7);
    backdrop-filter: blur(3px);
    border: 1px solid rgba(var(--background-modifier-border-rgb), 0.5);
    border-radius: var(--radius-s);
    padding: 2px;
    color: var(--text-muted);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s ease;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);

    .svg-icon { width: 14px; height: 14px; }

    &:hover {
      background-color: var(--background-modifier-hover);
      color: var(--text-normal);
      border-color: var(--background-modifier-border-hover);
      transform: scale(1.05);
    }
  }

  // Специфічні стилі для кнопок на повідомленнях користувача (якщо вони мають відрізнятися ВІД ЗАГАЛЬНИХ)
  // Якщо фон/колір кнопок дійсно залежить від типу повідомлення батька, це можна залишити.
  // Але краще, якщо базові стилі кнопки універсальні, а змінюється лише контейнер.
  .user-message-group & button { // Змінено селектор для більшої специфічності, якщо потрібно
                                  // .user-message - це сама бульбашка, а .user-message-group - це батько
    background-color: rgba(255, 255, 255, 0.15);
    border-color:red;// rgba(255, 255, 255, 0.2);
    color: var(--text-on-accent); // Використовуємо змінну, якщо є
                                  // або rgba(255, 255, 255, 0.8);
    opacity: 0.7;

    &:hover {
      background-color: rgba(255, 255, 255, 0.25);
      border-color: rgba(255, 255, 255, 0.3);
      opacity: 1;
    }
  }

  // Translate button specific states
  .translate-button {
    &.translation-pending {
      cursor: default;
      opacity: 0.6 !important; 
       .svg-icon {
         animation: spin 1s linear infinite;
       }
    }
  }
}


// Translation Display Area
.translation-container {
  border-top: 1px dashed var(--background-modifier-border);
  margin-top: calc(var(--chat-spacing-unit) * 2);
  padding-top: calc(var(--chat-spacing-unit) * 1.5);
  font-size: 0.95em;
  color: var(--text-muted);

  .user-message & { // Цей селектор може бути змінений на .user-message-group .message-wrapper &
    border-top-color: rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.85);
  }

  .translation-content {
    white-space: pre-wrap;
    line-height: $translation-base-line-height;
    font-size: inherit;
    
    display: flex;
    flex-direction: column;
    gap: 0em; 
      
    > p, > blockquote, > pre, > h1, > h2, > h3, > h4, > h5, > h6, > hr, > div {
      margin-top: 0;
      margin-bottom: 0.6em;
      padding: 0;
    }
    
    > :last-child {
      margin-bottom: 0;
    }
    
    > ul, > ol {
      line-height: $translation-list-container-line-height;
      padding-left: 1.8em;
      margin-top: 0;
      margin-bottom: 0.6em;
    }
    
    li {
      line-height: $translation-text-line-height;
      margin: 0.2em 0;
      padding: 0;
      
      > p, > span, > div, > blockquote, > pre, > h1, > h2, > h3, > h4, > h5, > h6 {
        line-height: $translation-text-line-height;
        margin-top: 0;
        margin-bottom: 0.25em;
        &:last-child { margin-bottom: 0; }
      }
      
      > ul, > ol {
        line-height: $translation-list-container-line-height;
        margin-top: 0.3em;
        margin-bottom: 0.3em;
        padding-left: 1.8em;
      }
    }
    
    > blockquote { padding: 0.5em 1em; margin-left: 0; }
    > pre { padding: 0.8em; }
    > h1, > h2, > h3, > h4, > h5, > h6 { line-height: 1.3; }
    > p { line-height: inherit; }
  }
  
  .translation-indicator {
    font-size: 0.8em;
    font-style: italic;
    margin-top: calc(var(--chat-spacing-unit) * 1);
    text-align: right;
    opacity: 0.7;
    .user-message & { // Або .user-message-group .message-wrapper &
      opacity: 0.6;
    }
  }
  // Дублювання .translation-indicator було видалено
}

// Правила :hover та позиціонування для .message-actions-wrapper були видалені звідси,
// оскільки вони тепер керуються з _messages.scss через .message-wrapper:hover
// та розташуванням .message-actions-wrapper всередині .message-meta-actions-wrapper.

// ВИДАЛЕНО ЗВІДСИ:
// .message:hover .message-actions-wrapper { ... }
// .ollama-message .message-actions-wrapper { ... }
// .user-message .message-actions-wrapper { ... }
// і специфічні стилі для button всередині .user-message .message-actions-wrapper,
// якщо вони дублюють .user-message-group & button вище або можуть бути уніфіковані.
// Якщо .user-message & button і .user-message-group & button роблять те саме, залишити один, більш загальний.
// Я залишив .user-message-group & button, оскільки це відповідає структурі HTML.